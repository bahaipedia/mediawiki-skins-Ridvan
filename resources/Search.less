@import 'mediawiki.skin.variables.less';

/* ==================================================================
   1. SEARCH BAR (Your Original Layout)
   ================================================================== */
#p-search {
    flex-grow: 1;
    display: flex;
    padding: 0 0.5em 0em 1em;
    position: relative;

    #searchInput {
        width: 100%;
        max-width: none;
        background-image: url( data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2220%22%20height%3D%2220%22%20viewBox%3D%220%200%2020%2020%22%3E%3Ctitle%3Esearch%3C%2Ftitle%3E%3Cg%20fill%3D%22%23D3D3D3%22%3E%3Cpath%20d%3D%22M7.5%2013a5.5%205.5%200%20100-11%205.5%205.5%200%20000%2011zm4.55.46A7.43%207.43%200%20017.5%2015a7.5%207.5%200%20115.96-2.95l6.49%206.49-1.41%201.41-6.49-6.49z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E );
        background-color: #fff;
        -webkit-appearance: none;
        margin-top: 0;
        font-size: 1rem;
        height: calc(1.5em + 0.75rem + 2px);
        border: solid 1px @color-gray-2;
        padding: 0.375rem 0.75rem;
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
        outline: 0;
        background-position: right 6px center;
        background-repeat: no-repeat;
        background-size: 18px;
        
        /* Ensure border changes smoothly */
        transition: border-color 250ms, box-shadow 250ms;
    }

    /* Hide the "Go" button and header */
    #searchButton,
    h3 {
        display: none !important;
    }
}

/* ==================================================================
   2. NEW DROPDOWN STYLING (Vector Style)
   ================================================================== */

/* The Container */
.ridvan-search-results {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 2000;
    background: #ffffff;
    border: 1px solid #a2a9b1;
    border-top: none;
    border-radius: 0 0 2px 2px;
    box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.15);
    margin-top: -1px;
    max-height: 80vh;
    overflow-y: auto;
    
    /* Ensure it fits inside the padding of #p-search */
    margin-left: 1em;   /* Matches #p-search padding-left */
    margin-right: 0.5em; /* Matches #p-search padding-right */
}

/* Result Rows */
.ridvan-result-row {
    display: flex;
    align-items: center;
    padding: 6px 12px;
    text-decoration: none;
    color: #202122;
    cursor: pointer;
    min-height: 48px;
    border-bottom: 1px solid #eaecf0;

    &:hover {
        background-color: #f8f9fa;
        text-decoration: none;
        color: #000;
    }
}

/* Thumbnails */
.ridvan-thumb-container {
    width: 40px;
    height: 40px;
    flex-shrink: 0;
    margin-right: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.ridvan-result-thumb {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 2px;
    border: 1px solid #eaecf0;
}

.ridvan-thumb-placeholder {
    /* Generic Document Icon */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20' fill='%2372777d'%3E%3Cpath d='M3 0h10l4 4v16H3V0zm0 2v16h12V6h-4V2H3z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    opacity: 0.4;
}

/* Text Content */
.ridvan-result-text {
    flex-grow: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.ridvan-result-title {
    font-size: 14px;
    font-weight: bold;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.2;
}

.ridvan-result-desc {
    font-size: 12px;
    color: #72777d;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.2;
    margin-top: 2px;
}

/* Footer Link */
.ridvan-result-footer {
    display: block;
    padding: 12px;
    font-size: 13px;
    color: @color-link;
    font-weight: bold;
    background: #f8f9fa;
    text-align: right;
    
    &:hover {
        background-color: #eaecf0;
        text-decoration: underline;
    }
}

/* ==================================================================
   3. MOBILE OVERRIDES
   ================================================================== */
@media ( max-width: @max-width-breakpoint-tablet ) {
    .ridvan-search-results {
        position: fixed;
        top: 60px; /* Adjust based on your header height */
        left: 2%;
        width: 96%;
        max-height: 60vh;
        margin: 0; /* Reset margins used for desktop alignment */
        box-shadow: 0 30px 50px rgba(0,0,0,0.5);
    }
}
