/* Default state: Hide the dropdown completely */
.citizen-typeahead {
    display: none;
}

/* ONLY show the dropdown if it contains a group that is NOT hidden */
.citizen-typeahead:has(.citizen-typeahead-group:not([hidden])) {
    display: block;
}

/* --- COMPATIBILITY LAYER --- */
.citizen-typeahead {
	--color-base: #202122;
	--color-emphasized: #000000;
	--color-subtle: #54595d;
	--color-surface-3: #eaecf0;
	--background-color-base-fixed: #fff;
	--background-color-button-quiet--hover: rgba(0, 24, 73, 0.027);
	--background-color-button-quiet--active: rgba(0, 24, 73, 0.082);
	--border-color-base: #a2a9b1;
	--border-radius-medium: 2px;
	--font-weight-medium: 500;
	--font-weight-semi-bold: 700;
	--space-xxs: 2px;
	--space-xs: 4px;
	--space-sm: 8px;
	--space-md: 12px;
	--space-xxl: 24px;
	--size-icon: 20px;
	--height-search-bar: 32px;
}

/* Mixin shim */
.mixin-citizen-font-styles( @type ) {
	font-family: sans-serif;
	font-size: 14px;
}

/* --- MAIN STYLES (Ported) --- */

.citizen-typeahead {
	background: #fff;
	border: 1px solid var(--border-color-base);
	box-shadow: 0 2px 4px rgba(0,0,0,0.1);
	position: absolute;
	top: 100%;
	left: -1px;
	right: 0;
	width: 100%;
	z-index: 100;
	
	/* Styles from skins.citizen.search.less */
	border-bottom-right-radius: var( --border-radius-medium );
	border-bottom-left-radius: var( --border-radius-medium );
	.mixin-citizen-font-styles( 'small' );

	a {
		color: var( --color-base );
		text-decoration: none;
		&:hover, &:focus { text-decoration: none; }
	}

    /* --- INPUT STYLING (SIMPLIFIED) --- */
    /* We removed -group and -overlay, now just style the input directly */
	&-input {
		color: var( --color-emphasized ) !important; /* TEXT IS VISIBLE NOW */
        caret-color: auto; /* Default browser cursor */
		height: 100%;
		width: 100%;
        padding: 6px 8px; /* Standard padding */
		box-sizing: border-box;
		background: #fff !important; /* White background */
        border: 1px solid var(--border-color-base);
        border-radius: var(--border-radius-medium);
        
        &:focus {
            border-color: #36c;
            outline: 1px solid #36c;
        }
	}

	&__highlight {
		font-weight: var( --font-weight-medium );
		color: var( --color-subtle );
	}

	&__labelItem {
		display: flex;
		gap: var( --space-xxs );
		align-items: center;
		color: var( --color-subtle );
	}
}

/* List Styles */
.citizen-typeahead-list {
	margin: 0;
	padding: 0;
	list-style: none;
	display: flex !important;
    flex-direction: column !important;
}

/* Item Styles */
.citizen-typeahead-list-item {
	&-link {
		display: flex;
		gap: var( --space-sm );
		width: 100%;
		align-items: center;
		min-height: 44px;
		float: none;
		box-sizing: border-box;
		margin: 0;
		padding: var( --space-xs ) var( --space-md );
		cursor: pointer;
	}

	&-image {
		flex-shrink: 0;
		width: 60px;
		height: 60px;
		overflow: hidden;
		background-position: center;
		background-size: cover;
		border-radius: var( --border-radius-medium );

		&--placeholder {
			display: grid;
			place-content: center;
			background-color: var( --color-surface-3 );
		}
	}

	&-text {
		display: flex;
		flex-grow: 1;
		flex-direction: column;
		overflow: hidden;
		color: var( --color-emphasized );
	}

	&-title { font-weight: var( --font-weight-semi-bold ); }
	&-description { color: var( --color-subtle ); font-size: 0.85em;}
}

/* Only hide the placeholder */
#citizen-typeahead-placeholder {
	display: none !important;
}

/* Style the action group to look distinct (Optional) */
#citizen-typeahead-group-action {
    border-top: 1px solid var(--border-color-base);
    margin-top: 4px;
}

/* Hide default MediaWiki suggestions */
.suggestions { display: none !important; }

/* --- MOBILE: FULL WIDTH DROPDOWN --- */
@media ( max-width: 768px ) {
    .citizen-typeahead {
        width: 100vw;
        left: var(--mobile-offset-left, 0);
        right: auto;
        border-radius: 0;
        border-left: none;
        border-right: none;
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
}
